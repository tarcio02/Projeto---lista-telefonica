<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Telefônica</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>
    <main>
        <div class="header">
            <h1>Lista de Contatos</h1>
            <img style=" text-align: center; width: 60px; height: 60px;" src="./img/livro-de-contato.png" alt="lista">
            </div>
        <form>
            <input type="hidden" name="id"/>
            <input name="nome" type="text" maxlength="50" placeholder="Nome" required/>
            <input  name="telefone" type="text" maxlength="50" placeholder="Número" required/> 
            <input id="sub" type="submit" value="Salvar"/>
        </form>
        <div class="list">
            <input id="Pesquisar" type="text" placeholder="Pesquisar" onkeyup="listar(this.value)"/>
            <ul>
            
            </ul>
        </div>
    </main>  
    <footer>
        &copy; 2023 - Todos os Direitos Reservados
    </footer>
    <script>
        let lista = localStorage.getItem("minhaLista");

        const formulario = document.querySelector("form")
        const ulPessoas = document.querySelector("ul")

        if(lista) {
            lista = JSON.parse(lista)
        } else {
            lista = [];
        }
        console.log(lista)

        formulario.addEventListener("submit", function(e){
            e.preventDefault()
            let novaPessoa = new Object();
            novaPessoa.nome = this.nome.value;
            novaPessoa.telefone = this.telefone.value;

            lista.push(novaPessoa);

            this.reset();

            localStorage.setItem("minhaLista", JSON.stringify(lista));
        })

    </script>
</html>